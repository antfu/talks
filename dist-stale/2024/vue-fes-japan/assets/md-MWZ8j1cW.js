import{P as G,d as O,r as N,z as h,aa as H,L,f as q,o as $,n as Q,E as D,b as R,w as M,g as a,e as V,af as c,v as U,x as J,T as z}from"./modules/vue-CmDslCPD.js";import{u as K,D as Y,N as X,c as v}from"./vis-network-1GkKdGC5.js";import{I as E,ak as Z,aj as j}from"./index-D_1luFRJ.js";import{_ as ee}from"./slidev/VClicks-D_176zZ5.js";import{I as ae}from"./slidev/default-BMO-vFo2.js";import"./modules/shiki-BZfrgrE4.js";const te="yak-example",oe={"blog-post":{x:-22,y:-380},"static-site-generator":{x:-18,y:-235},framework:{x:-23,y:-123},routing:{x:-151,y:-114},"state-management":{x:-73,y:-48},"ide-plugins":{x:67,y:-51},devtools:{x:116,y:-118},compiler:{x:-125,y:-174},"component-lib":{x:-13,y:-12},bundler:{x:-180,y:-234},lsp:{x:154,y:10},ssr:{x:-196,y:-47},testing:{x:87,y:-182},"markdown-compiler":{x:80,y:-299},"image-process":{x:-123,y:-301},"state-machine":{x:-105,y:13},highlight:{x:45,y:13},dots:{x:-14,y:78},dots1:{x:-111,y:81},dots2:{x:54,y:80},dots3:{x:81,y:-365},dots4:{x:124,y:-242}},se={x:-15.17038014929557,y:-134.66628559673643},ne=.9118900388488103,le={id:te,pos:oe,view:se,scale:ne},ie=G({"yak-example":le}),re=O({__name:"SlidevGraph",props:{id:{},items:{},editable:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},focusScale:{default:1.5},clicks:{type:[Number,Boolean],default:!1},backgroundColor:{}},setup(S,{expose:k}){const s=S,{isDark:x}=K(),{$clicks:d,$scale:w}=E(),f=N(),m=N(!1),y=h(()=>ie[s.id]||{}),b=h(()=>s.backgroundColor||(x.value?"#050505":"#ffff")),_=h(()=>x.value?.7:.6);function T(e,l=!1){const i=v(e.color||"#888"),[o,g,r]=i.oklch(),u=(t=1)=>v.oklch(_.value,g,r).mix(b.value,1-t).hex();return{id:e.name,label:e.display||e.name,...e,...e.dashed?{shapeProperties:{borderDashes:[2,2]}}:{},font:{color:u(e.faded?.75:1)},color:{border:u(e.faded?.05:e.dashed?.2:.5),background:u(e.faded?.02:(e.dashed,.05)),highlight:{border:u(e.dashed||e.faded?.2:.5),background:u(.1)},hover:{border:u(e.dashed||e.faded?.2:.5),background:u(.07)}},borderWidth:l?4:1,borderWidthSelected:l?4:2}}function B(e){const l=v(e.color||"#333"),[i,o,g]=l.oklch();return[...(e.from||[]).map(r=>({id:`${e.name}|from|${r}`,from:r,to:e.name,color:v.oklch(_.value,o,g).mix(b.value,.8).hex(),arrows:{to:{enabled:!0,type:"arrow"}}})),...(e.to||[]).map(r=>({id:`${e.name}|to|${r}`,from:e.name,to:r,color:v.oklch(_.value,o,g).mix(b.value,.8).hex(),arrows:{to:{enabled:!0,type:"arrow"}}})),...(e.related||[]).map(r=>({id:`${e.name}|related|${r}`,from:r,to:e.name,color:v.oklch(_.value,o,g).mix(b.value,.95).hex(),dashes:[3,3],physics:!1}))]}const P=h(()=>s.clicks===!1?9999999:Math.max(0,d.value-s.clicks)),W=h(()=>s.items.filter(e=>e.clicks!==!1));k({count:h(()=>s.items.length),stops:h(()=>W.value.length)});function C(){if(s.clicks===!1)return s.items;const e=[];let l=0;for(const i of s.items)i.clicks===!1?e.push(i):i.clicks==null?(l+=1,l<=P.value&&e.push(i)):(l=Math.max(l,i.clicks),i.clicks<=P.value&&e.push(i));return e}function A(){s.editable}H(f,()=>{m.value=!1});function F(){s.items.forEach(t=>{y.value.pos?.[t.name]&&Object.assign(t,y.value.pos[t.name])});const e=C(),l=new Y(e.map(t=>T(t))),i=new Y(e.flatMap(t=>B(t))),o=new X(f.value,{nodes:l,edges:i},{nodes:{labelHighlightBold:!1,shape:"box",margin:{top:10,right:10,bottom:8,left:10}},edges:{smooth:{enabled:!0,type:"discrete",roundness:.5},width:1,hoverWidth:0},physics:{enabled:!1},interaction:{dragNodes:!!m.value,dragView:!!m.value,zoomView:!!m.value,hover:!0}});o.interactionHandler.getPointer=function(t){const n=this.canvas.frame.canvas.getBoundingClientRect();return{x:(t.x-n.left)/w.value,y:(t.y-n.top)/w.value}};function g(){m.value}o.on("stabilized",()=>g()),o.on("dragEnd",()=>g()),o.on("click",t=>{if(!m.value&&t.nodes.length===1){const n=s.items.find(p=>p.name===t.nodes[0]);n?.link&&window.open(n.link,"_blank")}}),o.on("hoverNode",()=>{f.value&&(f.value.style.cursor="pointer")}),o.on("blurNode",()=>{f.value&&(f.value.style.cursor="default")}),D(()=>{o.setOptions({interaction:{dragNodes:m.value,dragView:m.value,zoomView:m.value,hover:!0}})});function r(){o.redraw(),y.value.view&&o.moveTo({animation:!1,position:y.value.view,scale:y.value.scale})}r(),Z(()=>{r(),setTimeout(()=>{r()},100)});let u=0;D(()=>{const t=C();if(l.update(t.map((n,p)=>T(n,s.clicks!==!1&&p===t.length-1))),i.update(t.flatMap(n=>B(n))),l.remove(l.getIds().filter(n=>!t.some(p=>p.name===n))),i.remove(i.getIds().filter(n=>!t.some(p=>n.startsWith(`${p.name}|`)))),!!s.focus){if(t.length>=C().length||s.clicks===!1)o.moveTo({position:o.getViewPosition(),scale:o.getScale()}),o.fit({animation:u?{duration:1500,easingFunction:"easeInOutQuad"}:void 0});else{const n=t[t.length-1];if(n){const p=o.getViewPosition(),I=Math.sqrt((p.x-n.x)**2+(p.y-n.y)**2);(I>200||!u||+P.value==1)&&(o.moveTo({position:o.getViewPosition(),scale:o.getScale()}),o.focus(n.name,{scale:s.focusScale,animation:u?{duration:600+I*2,easingFunction:"easeInOutQuad"}:!1}))}}u+=1}})}return L(()=>{F()}),(e,l)=>($(),q("div",{ref_key:"container",ref:f,class:Q(["slidev-graph",m.value?"editing":""]),onDblclick:A},null,34))}}),ce=O({__name:"YakExample",setup(S){E();const k=[{name:"blog-post",display:"Blog Post",color:"#f87171",to:["static-site-generator"],shapeProperties:{borderRadius:40}},{name:"static-site-generator",display:"Static Site Generator",color:"#fb923c",to:["framework","bundler","markdown-compiler","image-process"]},{name:"framework",display:"Framework",color:"#4ade80",to:["routing","state-management","ide-plugins","devtools","compiler","testing"]},{name:"routing",display:"Routing",color:"#a78bfa",to:["ssr"],clicks:4},{name:"state-management",display:"State Management",color:"#facc15",to:["state-machine"],clicks:4},{name:"ide-plugins",display:"IDE Plugins",color:"#60a5fa",to:["lsp","highlight"],clicks:4},{name:"devtools",display:"DevTools",color:"#2dd4bf",clicks:4},{name:"compiler",display:"Compiler",clicks:6},{name:"bundler",display:"Bundler",clicks:6},{name:"lsp",display:"LSP",clicks:6},{name:"ssr",display:"SSR",clicks:6},{name:"testing",display:"Testing Utils",to:["dots4"],clicks:6},{name:"markdown-compiler",display:"Markdown Compiler",to:["dots3"],clicks:6},{name:"image-process",display:"Image Processing",clicks:6},{name:"state-machine",display:"State Machine",to:["dots1"],clicks:6},{name:"dots1",display:"...",dashed:!0,clicks:6},{name:"dots2",display:"...",dashed:!0,clicks:6},{name:"dots3",display:"...",dashed:!0,clicks:6},{name:"dots4",display:"...",dashed:!0,clicks:6},{name:"highlight",display:"Syntax Highlight",to:["dots2"],clicks:6}];return(s,x)=>{const d=re;return $(),R(d,{id:"yak-example",clicks:0,items:k})}}}),de={grid:"~ cols-[4fr_2fr] gap-2"},ue={"w-130":""},ke={__name:"slides.md__slidev_7",setup(S){const{$clicksContext:k,$frontmatter:s}=E();return k.setup(),(x,d)=>{const w=ee,f=ce;return $(),R(ae,U(J(z(j)(z(s),6))),{default:M(()=>[d[2]||(d[2]=a("h1",null,'An Example of "Yak Shaving"',-1)),d[3]||(d[3]=a("div",{"mt-4":""},null,-1)),a("div",de,[a("div",ue,[V(w,null,{default:M(()=>d[0]||(d[0]=[a("ul",null,[a("li",null,[a("p",null,[c("You plan to "),a("span",{"text-red":""},"write a blog post"),c(" today.")])]),a("li",null,[a("p",null,[c("You feel that existing tools don’t quite meet your needs, so you decide to create your own "),a("span",{"text-orange":""},"static site generator"),c(".")])]),a("li",null,[a("p",null,[c("After spending half a month, you realize that frameworks don’t work well, you decide to invent a "),a("span",{"text-green":""},"new framework"),c(".")])]),a("li",null,[a("p",null,[c("Another month passes, and you realize that you now need: "),a("span",{"text-violet":""},"routing"),c(", "),a("span",{"text-yellow":""},"state management"),c(", "),a("span",{"text-blue":""},"IDE plugins"),c(", "),a("span",{"text-teal":""},"DevTools"),c(", and more.")])]),a("li",null,[a("p",null,"Two years later…")]),a("li",null,[a("p",null,[c("You find yourself inexplicably doing "),a("span",{"text-fuchsia":""},"shaving a yak"),c(" in Tibet…")])]),a("li",null,[a("p",null,"Wait, what about your blog?")])],-1)])),_:1,__:[0]})]),d[1]||(d[1]=a("div",null,null,-1))]),V(f,{absolute:"","top-0":"","right-0":"","bottom-0":"","w-100":""})]),_:1,__:[2,3]},16)}}};export{ke as default};
