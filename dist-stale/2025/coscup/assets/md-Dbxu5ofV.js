import{P as L,d as W,r as B,z as h,aa as Q,L as Y,f as q,o as N,n as A,E as D,b as R,w as M,g as a,e as T,af as c,v as J,x as K,T as z}from"./modules/vue-CmDslCPD.js";import{u as U,D as O,N as X,c as v}from"./vis-network-BpJqYTs7.js";import{I as P,ak as Z,aj as j}from"./index-C0qesoEA.js";import{_ as ee}from"./slidev/VClicks-D1qVYifP.js";import{I as ae}from"./slidev/default-CwFvot5H.js";import"./modules/shiki-BZfrgrE4.js";const se="yak-example",te={"blog-post":{x:-29,y:-354},"static-site-generator":{x:-22,y:-225},framework:{x:-23,y:-123},routing:{x:-151,y:-114},"state-management":{x:-57,y:-50},"ide-plugins":{x:70,y:-45},devtools:{x:116,y:-118},compiler:{x:-125,y:-174},"component-lib":{x:-13,y:-12},bundler:{x:-180,y:-234},lsp:{x:125,y:34},ssr:{x:-166,y:-11},testing:{x:87,y:-182},"markdown-compiler":{x:80,y:-299},"image-process":{x:-123,y:-301},"state-machine":{x:-77,y:30},highlight:{x:12,y:32},dots:{x:-14,y:78},dots1:{x:-83,y:106},dots2:{x:38,y:111},dots3:{x:81,y:-365},dots4:{x:130,y:-243}},oe={x:-15.17038014929557,y:-134.66628559673643},le=.9118900388488103,ne={id:se,pos:te,view:oe,scale:le},ie=L({"yak-example":ne}),re=W({__name:"SlidevGraph",props:{id:{},items:{},editable:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},focusScale:{default:1.5},clicks:{type:[Number,Boolean],default:!1},backgroundColor:{}},setup($,{expose:k}){const o=$,{isDark:x}=U(),{$clicks:d,$scale:b}=P(),p=B(),m=B(!1),y=h(()=>ie[o.id]||{}),_=h(()=>o.backgroundColor||(x.value?"#050505":"#ffff")),w=h(()=>x.value?.7:.6);function S(e,n=!1){const i=v(e.color||"#888"),[t,g,r]=i.oklch(),u=(s=1)=>v.oklch(w.value,g,r).mix(_.value,1-s).hex();return{id:e.name,label:e.display||e.name,...e,...e.dashed?{shapeProperties:{borderDashes:[2,2]}}:{},font:{color:u(e.faded?.75:1)},color:{border:u(e.faded?.05:e.dashed?.2:.5),background:u(e.faded?.02:(e.dashed,.05)),highlight:{border:u(e.dashed||e.faded?.2:.5),background:u(.1)},hover:{border:u(e.dashed||e.faded?.2:.5),background:u(.07)}},borderWidth:n?4:1,borderWidthSelected:n?4:2}}function I(e){const n=v(e.color||"#333"),[i,t,g]=n.oklch();return[...(e.from||[]).map(r=>({id:`${e.name}|from|${r}`,from:r,to:e.name,color:v.oklch(w.value,t,g).mix(_.value,.8).hex(),arrows:{to:{enabled:!0,type:"arrow"}}})),...(e.to||[]).map(r=>({id:`${e.name}|to|${r}`,from:e.name,to:r,color:v.oklch(w.value,t,g).mix(_.value,.8).hex(),arrows:{to:{enabled:!0,type:"arrow"}}})),...(e.related||[]).map(r=>({id:`${e.name}|related|${r}`,from:r,to:e.name,color:v.oklch(w.value,t,g).mix(_.value,.95).hex(),dashes:[3,3],physics:!1}))]}const C=h(()=>o.clicks===!1?9999999:Math.max(0,d.value-o.clicks)),F=h(()=>o.items.filter(e=>e.clicks!==!1));k({count:h(()=>o.items.length),stops:h(()=>F.value.length)});function E(){if(o.clicks===!1)return o.items;const e=[];let n=0;for(const i of o.items)i.clicks===!1?e.push(i):i.clicks==null?(n+=1,n<=C.value&&e.push(i)):(n=Math.max(n,i.clicks),i.clicks<=C.value&&e.push(i));return e}function G(){o.editable}Q(p,()=>{m.value=!1});function H(){o.items.forEach(s=>{y.value.pos?.[s.name]&&Object.assign(s,y.value.pos[s.name])});const e=E(),n=new O(e.map(s=>S(s))),i=new O(e.flatMap(s=>I(s))),t=new X(p.value,{nodes:n,edges:i},{nodes:{labelHighlightBold:!1,shape:"box",margin:{top:10,right:10,bottom:8,left:10}},edges:{smooth:{enabled:!0,type:"discrete",roundness:.5},width:1,hoverWidth:0},physics:{enabled:!1},interaction:{dragNodes:!!m.value,dragView:!!m.value,zoomView:!!m.value,hover:!0}});t.interactionHandler.getPointer=function(s){const l=this.canvas.frame.canvas.getBoundingClientRect();return{x:(s.x-l.left)/b.value,y:(s.y-l.top)/b.value}};function g(){m.value}t.on("stabilized",()=>g()),t.on("dragEnd",()=>g()),t.on("click",s=>{if(!m.value&&s.nodes.length===1){const l=o.items.find(f=>f.name===s.nodes[0]);l?.link&&window.open(l.link,"_blank")}}),t.on("hoverNode",()=>{p.value&&(p.value.style.cursor="pointer")}),t.on("blurNode",()=>{p.value&&(p.value.style.cursor="default")}),D(()=>{t.setOptions({interaction:{dragNodes:m.value,dragView:m.value,zoomView:m.value,hover:!0}})});function r(){t.redraw(),y.value.view&&t.moveTo({animation:!1,position:y.value.view,scale:y.value.scale})}r(),Z(()=>{r(),setTimeout(()=>{r()},100)});let u=0;D(()=>{const s=E();if(n.update(s.map((l,f)=>S(l,o.clicks!==!1&&f===s.length-1))),i.update(s.flatMap(l=>I(l))),n.remove(n.getIds().filter(l=>!s.some(f=>f.name===l))),i.remove(i.getIds().filter(l=>!s.some(f=>l.startsWith(`${f.name}|`)))),!!o.focus){if(s.length>=E().length||o.clicks===!1)t.moveTo({position:t.getViewPosition(),scale:t.getScale()}),t.fit({animation:u?{duration:1500,easingFunction:"easeInOutQuad"}:void 0});else{const l=s[s.length-1];if(l){const f=t.getViewPosition(),V=Math.sqrt((f.x-l.x)**2+(f.y-l.y)**2);(V>200||!u||+C.value==1)&&(t.moveTo({position:t.getViewPosition(),scale:t.getScale()}),t.focus(l.name,{scale:o.focusScale,animation:u?{duration:600+V*2,easingFunction:"easeInOutQuad"}:!1}))}}u+=1}})}return Y(()=>{H()}),(e,n)=>(N(),q("div",{ref_key:"container",ref:p,class:A(["slidev-graph",m.value?"editing":""]),onDblclick:G},null,34))}}),ce=W({__name:"YakExample",setup($){P();const k=[{name:"blog-post",display:"部落格文章",color:"#f87171",to:["static-site-generator"],shapeProperties:{borderRadius:40}},{name:"static-site-generator",display:"靜態網站生成器",color:"#fb923c",to:["framework","bundler","markdown-compiler","image-process"]},{name:"framework",display:"框架",color:"#4ade80",to:["routing","state-management","ide-plugins","devtools","compiler","testing"]},{name:"routing",display:"路由",color:"#a78bfa",to:["ssr"],clicks:4},{name:"state-management",display:"狀態管理",color:"#facc15",to:["state-machine"],clicks:4},{name:"ide-plugins",display:"IDE 插件",color:"#60a5fa",to:["lsp","highlight"],clicks:4},{name:"devtools",display:"開發者工具",color:"#2dd4bf",clicks:4},{name:"compiler",display:"編譯器",clicks:6},{name:"bundler",display:"打包工具",clicks:6},{name:"lsp",display:"語言伺服器協議",clicks:6},{name:"ssr",display:"伺服器端渲染",clicks:6},{name:"testing",display:"測試工具",to:["dots4"],clicks:6},{name:"markdown-compiler",display:"Markdown 編譯器",to:["dots3"],clicks:6},{name:"image-process",display:"圖片處理",clicks:6},{name:"state-machine",display:"狀態機",to:["dots1"],clicks:6},{name:"dots1",display:"...",dashed:!0,clicks:6},{name:"dots2",display:"...",dashed:!0,clicks:6},{name:"dots3",display:"...",dashed:!0,clicks:6},{name:"dots4",display:"...",dashed:!0,clicks:6},{name:"highlight",display:"語法高亮",to:["dots2"],clicks:6}];return(o,x)=>{const d=re;return N(),R(d,{id:"yak-example",clicks:0,items:k})}}}),de={grid:"~ cols-[4fr_2fr] gap-2"},ue={"w-130":""},ke={__name:"slides.md__slidev_8",setup($){const{$clicksContext:k,$frontmatter:o}=P();return k.setup(),(x,d)=>{const b=ee,p=ce;return N(),R(ae,J(K(z(j)(z(o),7))),{default:M(()=>[d[2]||(d[2]=a("h1",null,"薅牛毛的例子",-1)),d[3]||(d[3]=a("div",{"mt-4":""},null,-1)),a("div",de,[a("div",ue,[T(b,null,{default:M(()=>d[0]||(d[0]=[a("ul",null,[a("li",null,[a("p",null,[c("你今天打算"),a("span",{"text-red":""},"寫篇部落格")])]),a("li",null,[a("p",null,[c("你覺得現有的工具都不太符合你的需求，"),a("br"),c("你決定自己寫一個"),a("span",{"text-orange":""},"靜態網站產生器"),c("；")])]),a("li",null,[a("p",null,[c("花了半個月時間，你發現前端框架無法很好的配合你的產生器，"),a("br"),c("你決定自己寫發明一個"),a("span",{"text-green":""},"新的框架"),c("；")])]),a("li",null,[a("p",null,[c("又花了一個月時間，你發現你現在需要："),a("br"),a("span",{"text-violet":""},"路由"),c("，"),a("span",{"text-yellow":""},"狀態管理"),c("，"),a("span",{"text-blue":""},"IDE 外掛"),c("，"),a("span",{"text-teal":""},"DevTools"),c(" 等等；")])]),a("li",null,[a("p",null,"兩年之後…")]),a("li",null,[a("p",null,[c("你發現你不知為什麼正在青藏高原"),a("span",{"text-fuchsia":""},"薅牛毛"),c("…")])]),a("li",null,[a("p",null,"等一下，你的部落格呢？")])],-1)])),_:1,__:[0]})]),d[1]||(d[1]=a("div",null,null,-1))]),T(p,{absolute:"","top-0":"","right-0":"","bottom-0":"","w-100":""})]),_:1,__:[2,3]},16)}}};export{ke as default};
