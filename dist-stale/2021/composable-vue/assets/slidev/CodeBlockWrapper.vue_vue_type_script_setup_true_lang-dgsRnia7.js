import{i as A,j as B}from"../modules/unplugin-icons-DmZDU_eK.js";import{d as L,f as y,i as h,o as a,n as _,r as E,S as V,G as j,P as M,z as m,aQ as $,K as q,j as K,e as T,g as z,t as D,X as v,b as w,k as R}from"../modules/vue-DatK400y.js";import{a8 as X,C as G,aa as O,ab as P}from"../index-CiUIO7jQ.js";import{u as Q}from"./context-DGsLhW1a.js";import{a as I}from"../monaco/bundled-types-DvjY6uP3.js";const U=L({__name:"TitleIcon",props:{title:{}},setup(l){const e={pnpm:"i-vscode-icons:file-type-light-pnpm",npm:"i-vscode-icons:file-type-npm",yarn:"i-vscode-icons:file-type-yarn",bun:"i-vscode-icons:file-type-bun",deno:"i-vscode-icons:file-type-deno",vue:"i-vscode-icons:file-type-vue",svelte:"i-vscode-icons:file-type-svelte",angular:"i-vscode-icons:file-type-angular",react:"i-vscode-icons:file-type-reactjs",next:"i-vscode-icons:file-type-light-next",nuxt:"i-vscode-icons:file-type-nuxt",solid:"logos:solidjs-icon",astro:"i-vscode-icons:file-type-light-astro",rollup:"i-vscode-icons:file-type-rollup",webpack:"i-vscode-icons:file-type-webpack",vite:"i-vscode-icons:file-type-vite",esbuild:"i-vscode-icons:file-type-esbuild","package.json":"i-vscode-icons:file-type-node","tsconfig.json":"i-vscode-icons:file-type-tsconfig",".npmrc":"i-vscode-icons:file-type-npm",".editorconfig":"i-vscode-icons:file-type-editorconfig",".eslintrc":"i-vscode-icons:file-type-eslint",".eslintignore":"i-vscode-icons:file-type-eslint","eslint.config":"i-vscode-icons:file-type-eslint",".gitignore":"i-vscode-icons:file-type-git",".gitattributes":"i-vscode-icons:file-type-git",".env":"i-vscode-icons:file-type-dotenv",".env.example":"i-vscode-icons:file-type-dotenv",".vscode":"i-vscode-icons:file-type-vscode","tailwind.config":"vscode-icons:file-type-tailwind","uno.config":"i-vscode-icons:file-type-unocss","unocss.config":"i-vscode-icons:file-type-unocss",".oxlintrc":"i-vscode-icons:file-type-oxlint","vue.config":"i-vscode-icons:file-type-vueconfig",".mts":"i-vscode-icons:file-type-typescript",".cts":"i-vscode-icons:file-type-typescript",".ts":"i-vscode-icons:file-type-typescript",".tsx":"i-vscode-icons:file-type-typescript",".mjs":"i-vscode-icons:file-type-js",".cjs":"i-vscode-icons:file-type-js",".json":"i-vscode-icons:file-type-json",".js":"i-vscode-icons:file-type-js",".jsx":"i-vscode-icons:file-type-js",".md":"i-vscode-icons:file-type-markdown",".py":"i-vscode-icons:file-type-python",".ico":"i-vscode-icons:file-type-favicon",".html":"i-vscode-icons:file-type-html",".css":"i-vscode-icons:file-type-css",".scss":"i-vscode-icons:file-type-scss",".yml":"i-vscode-icons:file-type-light-yaml",".yaml":"i-vscode-icons:file-type-light-yaml",".php":"i-vscode-icons:file-type-php"};function t(i){const s=i.match(/~([^~]+)~/g);if(s&&s.length>0)return s[0].slice(1,-1);const p=Object.keys(e).sort((n,u)=>u.length-n.length);for(const n of p)if(i.toLowerCase().includes(n.toLowerCase()))return e[n];return""}return(i,s)=>t(i.title)?(a(),y("div",{key:0,class:_(`${t(i.title)} w-3.5 h-3.5 relative`)},null,2)):h("v-if",!0)}}),W=["data-title"],F={key:0,class:"slidev-code-block-title"},J={class:"leading-1em"},Y=["title"],ne=L({__name:"CodeBlockWrapper",props:{ranges:{type:Array,default:()=>[]},finally:{type:[String,Number],default:"last"},startLine:{type:Number,default:1},lines:{type:Boolean,default:I.lineNumbers},at:{type:[String,Number],default:"+1"},maxHeight:{type:String,default:void 0},title:{type:String,default:void 0}},setup(l){const e=l,{$clicksContext:t}=Q(),i=E(),s=X();V(()=>{t.unregister(s)}),j(()=>{i.value?.classList.toggle("slidev-code-line-numbers",e.lines)}),M(()=>{if(!t||!e.ranges?.length)return;const o=t.calculateSince(e.at,e.ranges.length-1);t.register(s,o);const r=m(()=>o?Math.max(0,t.current-o.start+1):G),f=m(()=>e.finally==="last"?e.ranges.at(-1):e.finally.toString());j(()=>{if(!i.value)return;let d=e.ranges[r.value]??f.value;const g=d==="hide";i.value.classList.toggle(O,g),g&&(d=e.ranges[r.value+1]??f.value);const C=i.value.querySelector(".shiki"),S=Array.from(C.querySelectorAll("code > .line")),H=S.length;if(P(d,H,e.startLine,c=>[S[c]]),e.maxHeight){const c=Array.from(C.querySelectorAll(".line.highlighted"));c.reduce((x,N)=>N.offsetHeight+x,0)>i.value.offsetHeight?c[0].scrollIntoView({behavior:"smooth",block:"start"}):c.length>0&&c[Math.round((c.length-1)/2)].scrollIntoView({behavior:"smooth",block:"center"})}})});const{copied:p,copy:n}=$();function u(){const o=i.value?.querySelector(".slidev-code")?.textContent;o&&n(o)}const k=q("activeTitle",null),b=m(()=>k===null&&e.title);return(o,r)=>{const f=A,d=B;return a(),y("div",{ref_key:"el",ref:i,class:_(["slidev-code-wrapper relative group",{"slidev-code-line-numbers":e.lines,active:v(k)===l.title}]),style:R({"max-height":e.maxHeight,"overflow-y":e.maxHeight?"scroll":void 0,"--start":e.startLine}),"data-title":l.title},[b.value?(a(),y("div",F,[T(U,{title:l.title},null,8,["title"]),z("div",J,D(l.title.replace(/~([^~]+)~/g,"").trim()),1)])):h("v-if",!0),K(o.$slots,"default"),v(I).codeCopy?(a(),y("button",{key:1,class:_(["slidev-code-copy absolute right-0 transition opacity-0 group-hover:opacity-20 hover:!opacity-100",b.value?"top-10":"top-0"]),title:v(p)?"Copied":"Copy",onClick:r[0]||(r[0]=g=>u())},[v(p)?(a(),w(f,{key:0,class:"p-2 w-8 h-8"})):(a(),w(d,{key:1,class:"p-2 w-8 h-8"}))],10,Y)):h("v-if",!0)],14,W)}}});export{ne as _};
