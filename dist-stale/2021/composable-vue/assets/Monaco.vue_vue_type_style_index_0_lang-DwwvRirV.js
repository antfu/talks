const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/CodeRunner-CmTJQ--7.js","assets/modules/vue-DatK400y.js","assets/monaco/bundled-types-DvjY6uP3.js","assets/modules/file-saver-DnRyLYBS.js","assets/monaco/bundled-types-DmQA1GZk.css","assets/index-CiUIO7jQ.js","assets/modules/shiki-DZhpi2fO.js","assets/modules/shiki-CozCpemh.css","assets/index-5imTQtds.css","assets/slidev/context-DGsLhW1a.js","assets/slidev/IconButton.vue_vue_type_script_setup_true_lang-C7nlNj6V.js","assets/CodeRunner-DcJPFc8h.css"])))=>i.map(i=>d[i]);
import{_ as E,k as q}from"./monaco/bundled-types-DvjY6uP3.js";import{d as F,r as M,z as U,aN as X,P as Y,p as k,f as G,o as H,g as W,b as I,i as J,k as P,X as N,V as Q}from"./modules/vue-DatK400y.js";import{a as ee}from"./modules/file-saver-DnRyLYBS.js";import{a as te,a8 as $}from"./index-CiUIO7jQ.js";import{u as ne}from"./slidev/context-DGsLhW1a.js";var j={exports:{}},Z;function oe(){return Z||(Z=1,function(b){var c=function(){var x=String.fromCharCode,A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",C={};function L(t,o){if(!C[t]){C[t]={};for(var s=0;s<t.length;s++)C[t][t.charAt(s)]=s}return C[t][o]}var v={compressToBase64:function(t){if(t==null)return"";var o=v._compress(t,6,function(s){return A.charAt(s)});switch(o.length%4){default:case 0:return o;case 1:return o+"===";case 2:return o+"==";case 3:return o+"="}},decompressFromBase64:function(t){return t==null?"":t==""?null:v._decompress(t.length,32,function(o){return L(A,t.charAt(o))})},compressToUTF16:function(t){return t==null?"":v._compress(t,15,function(o){return x(o+32)})+" "},decompressFromUTF16:function(t){return t==null?"":t==""?null:v._decompress(t.length,16384,function(o){return t.charCodeAt(o)-32})},compressToUint8Array:function(t){for(var o=v.compress(t),s=new Uint8Array(o.length*2),i=0,r=o.length;i<r;i++){var p=o.charCodeAt(i);s[i*2]=p>>>8,s[i*2+1]=p%256}return s},decompressFromUint8Array:function(t){if(t==null)return v.decompress(t);for(var o=new Array(t.length/2),s=0,i=o.length;s<i;s++)o[s]=t[s*2]*256+t[s*2+1];var r=[];return o.forEach(function(p){r.push(x(p))}),v.decompress(r.join(""))},compressToEncodedURIComponent:function(t){return t==null?"":v._compress(t,6,function(o){return O.charAt(o)})},decompressFromEncodedURIComponent:function(t){return t==null?"":t==""?null:(t=t.replace(/ /g,"+"),v._decompress(t.length,32,function(o){return L(O,t.charAt(o))}))},compress:function(t){return v._compress(t,16,function(o){return x(o)})},_compress:function(t,o,s){if(t==null)return"";var i,r,p={},y={},g="",w="",f="",h=2,d=3,l=2,u=[],e=0,a=0,n;for(n=0;n<t.length;n+=1)if(g=t.charAt(n),Object.prototype.hasOwnProperty.call(p,g)||(p[g]=d++,y[g]=!0),w=f+g,Object.prototype.hasOwnProperty.call(p,w))f=w;else{if(Object.prototype.hasOwnProperty.call(y,f)){if(f.charCodeAt(0)<256){for(i=0;i<l;i++)e=e<<1,a==o-1?(a=0,u.push(s(e)),e=0):a++;for(r=f.charCodeAt(0),i=0;i<8;i++)e=e<<1|r&1,a==o-1?(a=0,u.push(s(e)),e=0):a++,r=r>>1}else{for(r=1,i=0;i<l;i++)e=e<<1|r,a==o-1?(a=0,u.push(s(e)),e=0):a++,r=0;for(r=f.charCodeAt(0),i=0;i<16;i++)e=e<<1|r&1,a==o-1?(a=0,u.push(s(e)),e=0):a++,r=r>>1}h--,h==0&&(h=Math.pow(2,l),l++),delete y[f]}else for(r=p[f],i=0;i<l;i++)e=e<<1|r&1,a==o-1?(a=0,u.push(s(e)),e=0):a++,r=r>>1;h--,h==0&&(h=Math.pow(2,l),l++),p[w]=d++,f=String(g)}if(f!==""){if(Object.prototype.hasOwnProperty.call(y,f)){if(f.charCodeAt(0)<256){for(i=0;i<l;i++)e=e<<1,a==o-1?(a=0,u.push(s(e)),e=0):a++;for(r=f.charCodeAt(0),i=0;i<8;i++)e=e<<1|r&1,a==o-1?(a=0,u.push(s(e)),e=0):a++,r=r>>1}else{for(r=1,i=0;i<l;i++)e=e<<1|r,a==o-1?(a=0,u.push(s(e)),e=0):a++,r=0;for(r=f.charCodeAt(0),i=0;i<16;i++)e=e<<1|r&1,a==o-1?(a=0,u.push(s(e)),e=0):a++,r=r>>1}h--,h==0&&(h=Math.pow(2,l),l++),delete y[f]}else for(r=p[f],i=0;i<l;i++)e=e<<1|r&1,a==o-1?(a=0,u.push(s(e)),e=0):a++,r=r>>1;h--,h==0&&(h=Math.pow(2,l),l++)}for(r=2,i=0;i<l;i++)e=e<<1|r&1,a==o-1?(a=0,u.push(s(e)),e=0):a++,r=r>>1;for(;;)if(e=e<<1,a==o-1){u.push(s(e));break}else a++;return u.join("")},decompress:function(t){return t==null?"":t==""?null:v._decompress(t.length,32768,function(o){return t.charCodeAt(o)})},_decompress:function(t,o,s){var i=[],r=4,p=4,y=3,g="",w=[],f,h,d,l,u,e,a,n={val:s(0),position:o,index:1};for(f=0;f<3;f+=1)i[f]=f;for(d=0,u=Math.pow(2,2),e=1;e!=u;)l=n.val&n.position,n.position>>=1,n.position==0&&(n.position=o,n.val=s(n.index++)),d|=(l>0?1:0)*e,e<<=1;switch(d){case 0:for(d=0,u=Math.pow(2,8),e=1;e!=u;)l=n.val&n.position,n.position>>=1,n.position==0&&(n.position=o,n.val=s(n.index++)),d|=(l>0?1:0)*e,e<<=1;a=x(d);break;case 1:for(d=0,u=Math.pow(2,16),e=1;e!=u;)l=n.val&n.position,n.position>>=1,n.position==0&&(n.position=o,n.val=s(n.index++)),d|=(l>0?1:0)*e,e<<=1;a=x(d);break;case 2:return""}for(i[3]=a,h=a,w.push(a);;){if(n.index>t)return"";for(d=0,u=Math.pow(2,y),e=1;e!=u;)l=n.val&n.position,n.position>>=1,n.position==0&&(n.position=o,n.val=s(n.index++)),d|=(l>0?1:0)*e,e<<=1;switch(a=d){case 0:for(d=0,u=Math.pow(2,8),e=1;e!=u;)l=n.val&n.position,n.position>>=1,n.position==0&&(n.position=o,n.val=s(n.index++)),d|=(l>0?1:0)*e,e<<=1;i[p++]=x(d),a=p-1,r--;break;case 1:for(d=0,u=Math.pow(2,16),e=1;e!=u;)l=n.val&n.position,n.position>>=1,n.position==0&&(n.position=o,n.val=s(n.index++)),d|=(l>0?1:0)*e,e<<=1;i[p++]=x(d),a=p-1,r--;break;case 2:return w.join("")}if(r==0&&(r=Math.pow(2,y),y++),i[a])g=i[a];else if(a===p)g=h+h.charAt(0);else return null;w.push(g),i[p++]=h+g.charAt(0),r--,h=g,r==0&&(r=Math.pow(2,y),y++)}}};return v}();b!=null?b.exports=c:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return c})}(j)),j.exports}var ie=oe();const K=ee(ie),re={class:"relative slidev-monaco-container"},fe=F({__name:"Monaco",props:{codeLz:{default:""},diffLz:{},lang:{default:"typescript"},readonly:{type:Boolean,default:!1},lineNumbers:{default:"off"},height:{default:"initial"},editorOptions:{},ata:{type:Boolean,default:!0},runnable:{type:Boolean,default:!1},writable:{},autorun:{type:[Boolean,String],default:!0},showOutputAt:{type:[null,Boolean,String,Number,Array]},outputHeight:{},highlightOutput:{type:Boolean,default:!0},runnerOptions:{}},setup(b){const c=b,x=Q(()=>E(()=>import("./slidev/CodeRunner-CmTJQ--7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(l=>l.default)),A=M(K.decompressFromBase64(c.codeLz).trimEnd()),O=c.diffLz&&M(K.decompressFromBase64(c.diffLz).trimEnd()),C=U(()=>c.writable&&!c.readonly&&!1),v={ts:"typescript",js:"javascript"}[c.lang]??c.lang,o={typescript:"mts",javascript:"mjs",ts:"mts",js:"mjs"}[c.lang]??c.lang,s=M(),i=M(),r=M(0),p=M(),y=U(()=>c.height==="auto"?`${r.value}px`:c.height==="initial"?`${p.value}px`:c.height),g=M(),{$page:w,$renderContext:f}=ne(),{currentSlideNo:h}=te(),d=X(()=>Math.abs(w.value-h.value)<=1&&g.value,l=>{["slide","presenter"].includes(f.value)?l():setTimeout(l,5e3)});return Y(async()=>{const{default:l}=await E(async()=>{const{default:m}=await import("./monaco/bundled-types-DvjY6uP3.js").then(S=>S.v);return{default:m}},__vite__mapDeps([2,3,1,4])),{ata:u,monaco:e,editorOptions:a}=await l(),n=e.editor.createModel(A.value,v,e.Uri.parse(`file:///${$()}.${o}`));n.onDidChangeContent(()=>A.value=n.getValue());const T={automaticLayout:!0,readOnly:c.readonly,lineNumbers:c.lineNumbers,minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:10,bottom:10},lineNumbersMinChars:3,bracketPairColorization:{enabled:!1},tabSize:2,fontSize:11.5,fontFamily:"var(--slidev-code-font-family)",scrollBeyondLastLine:!1,useInlineViewWhenSpaceIsLimited:!1,...a,...c.editorOptions};let _;if(O){const m=e.editor.createModel(O.value,v,e.Uri.parse(`file:///${$()}.${o}`));m.onDidChangeContent(()=>A.value=n.getValue());const S=e.editor.createDiffEditor(i.value,{renderOverviewRuler:!1,...T});S.setModel({original:n,modified:m});const z=S.getOriginalEditor(),B=S.getModifiedEditor(),D=()=>{const R=Math.max(z.getContentHeight(),B.getContentHeight())+4;p.value??=R,r.value=R,k(()=>S.layout())};z.onDidContentSizeChange(D),B.onDidContentSizeChange(D),_=B}else{const m=e.editor.create(i.value,{model:n,lineDecorationsWidth:0,...T});m.onDidContentSizeChange(S=>{const z=S.contentHeight+4;p.value??=z,r.value=z,k(()=>_.layout())}),_=m}g.value=()=>{d(),E(()=>import("./monaco/bundled-types-DvjY6uP3.js").then(m=>m.w),__vite__mapDeps([2,3,1,4])),c.ata&&(u(_.getValue()),_.onDidChangeModelContent(q(1e3,()=>{u(_.getValue())})))};const V=_.layoutContentWidget.bind(_);_.layoutContentWidget=m=>{V(m),m.getId()==="editor.contrib.resizableContentHoverWidget"&&(m._resizableNode.domNode.style.transform=m._positionPreference===1?"translateY(calc(100% * (var(--slidev-slide-scale) - 1)))":"")},_.addAction({id:"slidev-save",label:"Save",keybindings:[e.KeyMod.CtrlCmd|e.KeyCode.KeyS],run:()=>{C.value,console.warn("[Slidev] this monaco editor is not writable, save action is ignored.")}}),k(()=>e.editor.remeasureFonts()),setTimeout(()=>e.editor.remeasureFonts(),1e3)}),(l,u)=>(H(),G("div",re,[W("div",{ref_key:"outer",ref:s,class:"relative slidev-monaco-container-inner",style:P({height:y.value})},[W("div",{ref_key:"container",ref:i,class:"absolute inset-0.5"},null,512)],4),c.runnable?(H(),I(N(x),{key:0,modelValue:A.value,"onUpdate:modelValue":u[0]||(u[0]=e=>A.value=e),lang:N(v),autorun:c.autorun,"show-output-at":c.showOutputAt,height:c.outputHeight,"highlight-output":c.highlightOutput,"runner-options":c.runnerOptions},null,8,["modelValue","lang","autorun","show-output-at","height","highlight-output","runner-options"])):J("v-if",!0)]))}});export{fe as _};
